<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.cpf.mapper.transaction.TraProductMapper" >
  <resultMap id="BaseResultMap" type="com.cpf.beans.transaction.TraProduct" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="productid" property="productid" jdbcType="VARCHAR" />
    <result column="productcode" property="productcode" jdbcType="VARCHAR" />
    <result column="userid" property="userid" jdbcType="VARCHAR" />
    <result column="productname" property="productname" jdbcType="VARCHAR" />
    <result column="author" property="author" jdbcType="VARCHAR" />
    <result column="cateid" property="cateid" jdbcType="VARCHAR" />
    <result column="isfinished" property="isfinished" jdbcType="VARCHAR" />
    <result column="defect" property="defect" jdbcType="VARCHAR" />
    <result column="isOriginal" property="isoriginal" jdbcType="VARCHAR" />
    <result column="ismyself" property="ismyself" jdbcType="VARCHAR" />
    <result column="longl" property="longl" jdbcType="VARCHAR" />
    <result column="width" property="width" jdbcType="VARCHAR" />
    <result column="Material" property="material" jdbcType="VARCHAR" />
    <result column="Framed" property="framed" jdbcType="VARCHAR" />
    <result column="shape" property="shape" jdbcType="VARCHAR" />
    <result column="era" property="era" jdbcType="VARCHAR" />
    <result column="cretime" property="cretime" jdbcType="DATE" />
    <result column="state" property="state" jdbcType="VARCHAR" />
    <result column="isMultiple" property="ismultiple" jdbcType="CHAR" />
  </resultMap>
  
  <!-- 首页搜索框搜索 易物接口  -->
  <select id="selectBartersBySearch" resultMap="BaseResultMap">
  	select t.productid productid,p.productname productname,p.productcode productcode,count(c.collectId) num from tra_trading t 
	LEFT JOIN tra_product p on t.productid = p.productid
	LEFT JOIN sys_collect c on t.productid = c.productId and c.collectType = '0'
	where t.toused = '1'
	group by productId,productName,productCode 
  	
  </select>
  
</mapper>